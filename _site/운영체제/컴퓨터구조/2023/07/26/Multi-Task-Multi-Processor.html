<!DOCTYPE html>
<html lang="en"><head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1"><link type="application/atom+xml" rel="alternate" href="http://localhost:4000/feed.xml" title="bdg-blog" /></head>
<style>@import url(/public/css/syntax/monokai.css);</style>
  <title>bdg-blog</title>
  <!-- <link href="/public/css/bootstrap.min.css" rel="stylesheet"> -->

  <link href="/public/css/style.css" rel="stylesheet">
  <body>
  	<div class="container"> 
		<div class="sidebar">
			<div class="sidebar-item sidebar-header">
	<div class='sidebar-brand'>
		<a href="/">bdg-blog</a>
	</div>
	<p class="lead"></p></div>

<div class="sidebar-item sidebar-nav">
	<ul class="nav">
      <li class="nav-title">Pages</li>
	  <li>
	  	<a class="nav-item" href="/">Articles</a>
	  </li>
	  
	  
	    
	  
	    
	      
	    
	  
	    
	  
	    
	  
	</ul>
</div>

<div class="sidebar-item sidebar-nav">
  	<ul class="nav">
			<li class="nav-title">Categories</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#쿠버네티스">
				<span class="name">쿠버네티스</span>
				<span class="badge">10</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#기타">
				<span class="name">기타</span>
				<span class="badge">8</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#운영체제/컴퓨터구조">
				<span class="name">운영체제/컴퓨터구조</span>
				<span class="badge">7</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#백앤드">
				<span class="name">백앤드</span>
				<span class="badge">5</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#컨테이너">
				<span class="name">컨테이너</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#Go">
				<span class="name">Go</span>
				<span class="badge">6</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#클린 아키텍쳐">
				<span class="name">클린 아키텍쳐</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#보안">
				<span class="name">보안</span>
				<span class="badge">2</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#리눅스">
				<span class="name">리눅스</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#네트워크">
				<span class="name">네트워크</span>
				<span class="badge">4</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#자바스크립트">
				<span class="name">자바스크립트</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	    <li>
	    	<a class="nav-item" href="/category/#클린 코드">
				<span class="name">클린 코드</span>
				<span class="badge">1</span>
	    	</a>
 		</li>
	    
	  </nav>
	</ul>
</div>

<div class="sidebar-item sidebar-footer">
</div>
		</div>
		<div class="content">
			<article class="post">
	<header class="post-header">
		<div class="post-title"> 
			Multi Task, Multi Processor
		</div>
		<time class="post-date dt-published" datetime="2023-07-26T19:36:05+09:00" itemprop="datePublished">2023/07/26
		</time>		
	</header>

	<div class="post-content">
		<h2 id="i-작업과-자원의-의미">I. “작업”과 “자원”의 의미</h2>
<p>컴퓨터는 자원으로 작업을 수행하는 장치이다. 자세히 알아보자.</p>

<h3 id="1-작업이란">1. 작업이란?</h3>
<blockquote>
  <p><em>Task란 “실행” 혹은 “일”의 단위이다. Linux Kernel의 Resource Shareing관점에서 Tasks는 Process, Thread으로 간주될 것이다.
-wikipedia</em></p>
</blockquote>

<p>Process, Thread 또한 정의된 “작업”이다. (나는 처음 공부할 때, Process와 Thread가 일을 하는 자원이라고 오해하여 많이 헤맸던 경험이 있다.)</p>

<h3 id="2-자원이란">2. 자원이란?</h3>
<p>Computer의 자원은 Computer가 동작하기 위해 필요한 모든 물리적 장치를 의미한다. 하지만 이번 포스트에서는 이 자원중에서도 Processor에 대해 다루겠다.</p>
<blockquote>
  <p>Processor (Processing Unit)은 메모리 혹은 다른 외부 데이터 자원에 대한 작업을 수행하는 논리 회로를 의미한다.
-wikipedia</p>
</blockquote>

<h3 id="3-그래서">3. 그래서..?</h3>

<p>정리해보면 <strong>컴퓨터는 “Process &amp; Thread”라는 작업을 생성하고 CPU라는 자원이 이 작업을 수행하는 장치이다.</strong></p>

<p><strong>자원</strong>의 개수에 따라</p>
<ul>
  <li>Single Processor System</li>
  <li>Multi Processor System</li>
</ul>

<p>이 분리되고</p>

<p><strong>작업</strong>의 개수가 하나 이상인 경우</p>
<ul>
  <li>multi Programing</li>
  <li>multi Tasking</li>
  <li>multi processing</li>
  <li>multi Threading</li>
</ul>

<p>등이 존재한다.</p>

<p>만약 여러분이 최근에 나온 컴퓨터로 Chrome탭을 여러개 실행하고 있다면,
여러분은 Multi processor System에서 Multi Processing을 수행하고 있으며, 동시에 각 Process마다 Multi Threading이 수행되고 있다.</p>

<h2 id="ii-multi-task-multi-processor">II. Multi task, Multi processor</h2>

<h3 id="1-single-core-single-process-single-thread">1. Single Core, Single Process, Single Thread</h3>

<p><img alt="image" src="/images/5cf4beab-a158-461e-bdba-25d80edfff20" /></p>

<p>가장 단순한 경우이다. <strong>1개의 작업을 1개의 자원이 수행</strong>한다. Scheduling같은 작업이 필요하지 않다.</p>

<h3 id="2-single-core-multi-process-single-thread">2. Single Core, Multi Process, Single Thread</h3>

<p><img alt="image" src="/images/bdf403f8-1a48-4614-80bc-64efa082eb32" /></p>

<ul>
  <li>CPU의 Core가 1개이고 이 Core는 동시에 1개의 Thread만 실행이 가능하다.</li>
  <li>각 프로세스마다 실행 시간을 할당(Scheduling)하고 번갈아가면서 수행(Context Switching)해야 한다.</li>
  <li>Scheduling을 통해 <strong>CPU Protection</strong>을 수행한다.</li>
  <li>Process는 다른 I/O, Memory의 자원을 커널의 도움 없이 접근할 수 없다. (<strong>Memory/IO Protection</strong>)</li>
  <li>Process 수준의 Context Switching이 발생하기 때문에 <strong>Switch overhead</strong>가 높다. (PCB의 정보를 모두 저장 Load해야한다.)</li>
</ul>

<h3 id="3-single-core-multi-process-multi-thread">3. Single Core, Multi Process, Multi Thread</h3>

<p><img alt="image" src="/images/8ee519c4-03d7-41ed-8b8b-0a548f8abf55" /></p>

<ul>
  <li>CPU의 Core가 1개이고 이 Core는 동시에 1개의 Thread만 실행이 가능하다.</li>
  <li>각 쓰레드마다 실행 시간을 할당(Scheduling)하고 번갈아가면서 수행(Context Switching)해야 한다.</li>
  <li>Scheduling을 통해 <strong>CPU Protection</strong>을 수행한다.</li>
  <li><strong>동일한 Process</strong> 안에서 Context Switching이 발생하는 경우
    <ul>
      <li>일부 자원을 공유하기 때문에 <strong>Switch overhead가 낮다</strong>. (TCB의 정보만 변경한다.)</li>
      <li>다른 Thread의 일부 I/O, Memory의 자원에 접근할 수 있다. (<strong>Memory/IO Protection이 지켜지지 않는다</strong>.)</li>
      <li>새로운 Thread를 생성하는 비용은 새로운 Process를 생성하는 비용에 비해 저렴하다. (<strong>low thread creation</strong>)</li>
    </ul>
  </li>
</ul>

<h3 id="4-multi-core-multi-process-multi-thread">4. Multi Core, Multi Process, Multi Thread</h3>

<p><img alt="image" src="/images/2ac5e857-9b37-4697-a4e4-e38a3cde87b7" /></p>

<ul>
  <li>CPU의 Core가 여러개이고, 각각의 Core는 동시에 1개의 Thread만 실행이 가능하다.</li>
  <li>각 쓰레드마다 실행 시간을 할당(Scheduling)하고 번갈아가면서 수행(Context Switching)해야 한다.</li>
  <li>Scheduling과 다른 core의 실행을 통해 <strong>CPU Protection</strong>을 수행한다.</li>
  <li><strong>동일한 Process</strong> 안에서 Context Switching이 발생하는 경우
    <ul>
      <li>일부 자원을 공유하기 때문에 <strong>Switch overhead가 낮다</strong>. (TCB의 정보만 변경한다.)</li>
      <li>다른 Thread의 일부 I/O, Memory의 자원에 접근할 수 있다. (<strong>Memory/IO Protection이 지켜지지 않는다</strong>.)</li>
      <li>새로운 Thread를 생성하는 비용은 새로운 Process를 생성하는 비용에 비해 저렴하다. (<strong>low thread creation</strong>)</li>
    </ul>
  </li>
</ul>

<h3 id="5-multi-core-multi-process-multi-thread-and-hyper-threading">5. Multi Core, Multi Process, Multi Thread And Hyper Threading</h3>

<p>CPU내부에서는 부동소수점 처리 코어인 FPU와 정수 연산 코어인 ALU가 존재한다. 대부분의 경우 FPU가 덜 사용된다. 이를 활용하여 가상 쓰레드를 하나 더 만들어 하나의 코어가 하나 이상의 쓰레드를 동시에 실행할 수 있도록하는 기술을 하이퍼 쓰레딩이라고 한다.(명확하지 않다. 더 정리가 필요하다.)</p>

<p>하이퍼 쓰레딩 기술이 하나의 코어를 완전히 2개의 코어로 만들지는 못하지만 개념적으로 하나의 코어가 여러개의 쓰레드를 수행할 수 있다.</p>

<p><img alt="image" src="/images/3e2d1625-afaa-46a0-a491-5ac098cb3ed5" /></p>

<ul>
  <li>FPU와 ALU가 경합하는 상황이 발생할 경우 성능이 저하될 수 있다.</li>
  <li>동일한 Core 내에서 Thread의 Context Switchng을 할 경우, 매우 낮은 비용의 Switch overhead가 발생한다.</li>
</ul>

<h2 id="reference">Reference</h2>
<ul>
  <li>https://www.quora.com/How-does-multithreading-work-in-a-single-core-computer</li>
  <li>https://stackoverflow.com/questions/16116952/can-multithreading-be-implemented-on-a-single-processor-system</li>
  <li>https://en.wikipedia.org/wiki/Task_(computing)</li>
  <li>https://levelup.gitconnected.com/how-web-browsers-use-processes-and-threads-9f8f8fa23371</li>
  <li>https://coolenjoy.net/bbs/27/56356</li>
</ul>

<p><em>(위 이미지들의 출처는 [Anthony D. Joseph and John Canny CS162 ©UCB Fall 2013]이다.)</em></p>

	</div>
	<br/>
	<br/>
	<script src="https://utteranc.es/client.js"
        repo="deagwon97/deagwon97.github.io"
        issue-term="url"
        theme="github-light"
        crossorigin="anonymous"
        async>
	</script>
</article>
		</div>
	</div>
  </body>
</html>